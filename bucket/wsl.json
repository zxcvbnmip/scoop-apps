{
    "version": "2.3.26",
    "description": "Windows Subsystem for Linux (WSL) Installer",
    "homepage": "https://github.com/microsoft/WSL",
    "architecture": {
        "64bit": {
            "url": "https://github.com/microsoft/WSL/releases/download/2.3.26/wsl.2.3.26.0.x64.msi#/wsl.msi_",
            "hash": "cd3f2a68a1a5836f6a1cc9965a7f5f54db267ca221eaa87df29345ab7957aec4"
        },
        "arm64": {
            "url": "https://github.com/microsoft/WSL/releases/download/2.3.26/wsl.2.3.26.0.arm64.msi#/wsl.msi_",
            "hash": "d23b30f34d3e21bbf1a92db0a25d55d446262eb2169e84ffff999ee77f751ac5"
        }
    },
    "pre_install": [
        "if (!(is_admin)) {",
        "    error \"Administrator rights are required to install $app.\"",
        "    scoop uninstall $app",
        "    exit 1",
        "}",
        "info 'Enable Hyper-V Core for WSL2...'",
        "Enable-WindowsOptionalFeature -FeatureName 'VirtualMachinePlatform' -All -Online -NoRestart -LimitAccess | Out-Null",
        "info 'Enable WSL1...'",
        "Enable-WindowsOptionalFeature -FeatureName 'Microsoft-Windows-Subsystem-Linux' -All -Online -NoRestart -LimitAccess | Out-Null",
        "info 'Extracting WSL installation files...'",
        "Expand-7zipArchive \"$dir\\wsl.msi_\" $dir -Switches '-t* Binary.msixpackage'",
        "Rename-Item \"$dir\\Binary.msixpackage\" \"$dir\\msixpackage\"",
        "Expand-7zipArchive \"$dir\\wsl.msi_\" $dir -Switches '-t* Binary.wslinstall.dll'",
        "Rename-Item \"$dir\\Binary.wslinstall.dll\" \"$dir\\wslinstall.dll\"",
        "Expand-MsiArchive \"$dir\\wsl.msi_\" $dir -ExtractDir 'PFiles64\\WSL' -Removal"
    ],
    "installer": {
        "script": [
            "$instdir = $dir -replace '\\\\', '\\\\'",
            "",
            "@\"",
            "Windows Registry Editor Version 5.00",
            "",
            ";wsl",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Lxss]",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Lxss\\MSI]",
            "\"InstallLocation\"=\"$instdir\\\\\"",
            "\"ProductCode\"=\"{9123DBDC-D242-4A68-9E97-841E2A788E7C}\"",
            "\"Version\"=\"$version.0\"",
            "",
            ";wslservice",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Interface\\{38541BDC-F54F-4CEB-85D0-37F0F3D2617E}]",
            "@=\"ILxssUserSession\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Interface\\{38541BDC-F54F-4CEB-85D0-37F0F3D2617E}\\ProxyStubClsid32]",
            "@=\"{4EA0C6DD-E9FF-48E7-994E-13A31D10DC60}\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{4EA0C6DD-E9FF-48E7-994E-13A31D10DC60}]",
            "@=\"PSFactoryBuffer\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{4EA0C6DD-E9FF-48E7-994E-13A31D10DC60}\\InProcServer32]",
            "@=\"$instdir\\\\wslserviceproxystub.dll\"",
            "\"ThreadingModel\"=\"Both\"",
            "",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\AppID\\{370121D2-AA7E-4608-A86D-0BBAB9DA1A60}]",
            "\"AccessPermission\"=hex:01,00,04,80,58,00,00,00,68,00,00,00,00,00,00,00,14,00,\\",
            "  00,00,02,00,44,00,03,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,\\",
            "  05,0B,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,0A,00,00,00,\\",
            "  00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,12,00,00,00,01,02,00,00,00,\\",
            "  00,00,05,20,00,00,00,20,02,00,00,01,02,00,00,00,00,00,05,20,00,00,00,20,02,\\",
            "  00,00",
            "\"LaunchPermission\"=hex:01,00,04,80,58,00,00,00,68,00,00,00,00,00,00,00,14,00,\\",
            "  00,00,02,00,44,00,03,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,\\",
            "  05,0B,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,0A,00,00,00,\\",
            "  00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,12,00,00,00,01,02,00,00,00,\\",
            "  00,00,05,20,00,00,00,20,02,00,00,01,02,00,00,00,00,00,05,20,00,00,00,20,02,\\",
            "  00,00",
            "\"LocalService\"=\"WSLService\"",
            "",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{a9b7a1b9-0671-405c-95f1-e0612cb4ce7e}]",
            "@=\"LxssUserSession\"",
            "\"AppId\"=\"{370121D2-AA7E-4608-A86D-0BBAB9DA1A60}\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{2B9C59C3-98F1-45C8-B87B-12AE3C7927E8}\\LocalServer32]",
            "@=\"\\\"$instdir\\\\wslhost.exe\\\"\"",
            "",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\AppID\\{17696EAC-9568-4CF5-BB8C-82515AAD6C09}]",
            "\"AccessPermission\"=hex:01,00,04,80,58,00,00,00,68,00,00,00,00,00,00,00,14,00,\\",
            "  00,00,02,00,44,00,03,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,\\",
            "  05,0B,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,0A,00,00,00,\\",
            "  00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,12,00,00,00,01,02,00,00,00,\\",
            "  00,00,05,20,00,00,00,20,02,00,00,01,02,00,00,00,00,00,05,20,00,00,00,20,02,\\",
            "  00,00",
            "\"AppIDFlags\"=dword:00000800",
            "\"DllSurrogate\"=\"\"",
            "\"LaunchPermission\"=hex:01,00,04,80,58,00,00,00,68,00,00,00,00,00,00,00,14,00,\\",
            "  00,00,02,00,44,00,03,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,\\",
            "  05,0B,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,0A,00,00,00,\\",
            "  00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,12,00,00,00,01,02,00,00,00,\\",
            "  00,00,05,20,00,00,00,20,02,00,00,01,02,00,00,00,00,00,05,20,00,00,00,20,02,\\",
            "  00,00",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{ABB755FC-1B86-4255-83E2-E5787ABCF6C2}]",
            "@=\"WslDeviceHost_VirtioPmem\"",
            "\"AppId\"=\"{17696EAC-9568-4CF5-BB8C-82515AAD6C09}\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{ABB755FC-1B86-4255-83E2-E5787ABCF6C2}\\InProcServer32]",
            "@=\"$instdir\\\\wsldevicehost.dll\"",
            "\"ThreadingModel\"=\"Both\"",
            "",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{7e6ad219-d1b3-42d5-b8ee-d96324e64ff6}]",
            "@=\"WslDeviceHost_VirtioFs_Admin\"",
            "\"AppId\"=\"{7F82AD86-755B-4870-86B1-D2E68DFE8A49}\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{7e6ad219-d1b3-42d5-b8ee-d96324e64ff6}\\InProcServer32]",
            "@=\"$instdir\\\\wsldevicehost.dll\"",
            "\"ThreadingModel\"=\"Both\"",
            "",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\AppID\\{7F82AD86-755B-4870-86B1-D2E68DFE8A49}]",
            "\"AccessPermission\"=hex:01,00,04,80,58,00,00,00,68,00,00,00,00,00,00,00,14,00,\\",
            "  00,00,02,00,44,00,03,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,\\",
            "  05,0B,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,0A,00,00,00,\\",
            "  00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,12,00,00,00,01,02,00,00,00,\\",
            "  00,00,05,20,00,00,00,20,02,00,00,01,02,00,00,00,00,00,05,20,00,00,00,20,02,\\",
            "  00,00",
            "\"AppIDFlags\"=dword:00000800",
            "\"DllSurrogate\"=\"\"",
            "\"LaunchPermission\"=hex:01,00,04,80,58,00,00,00,68,00,00,00,00,00,00,00,14,00,\\",
            "  00,00,02,00,44,00,03,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,\\",
            "  05,0B,00,00,00,00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,0A,00,00,00,\\",
            "  00,00,14,00,0B,00,00,00,01,01,00,00,00,00,00,05,12,00,00,00,01,02,00,00,00,\\",
            "  00,00,05,20,00,00,00,20,02,00,00,01,02,00,00,00,00,00,05,20,00,00,00,20,02,\\",
            "  00,00",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{60285AE6-AAF3-4456-B444-A6C2D0DEDA38}]",
            "@=\"WslDeviceHost_VirtioFs\"",
            "\"AppId\"=\"{17696EAC-9568-4CF5-BB8C-82515AAD6C09}\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{60285AE6-AAF3-4456-B444-A6C2D0DEDA38}\\InProcServer32]",
            "@=\"$instdir\\\\wsldevicehost.dll\"",
            "\"ThreadingModel\"=\"Both\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{16479D2E-F0C3-4DBA-BF7A-04FFF0892B07}]",
            "@=\"WslDeviceHost_Net\"",
            "\"AppId\"=\"{17696EAC-9568-4CF5-BB8C-82515AAD6C09}\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{16479D2E-F0C3-4DBA-BF7A-04FFF0892B07}\\InProcServer32]",
            "@=\"$instdir\\\\wsldevicehost.dll\"",
            "\"ThreadingModel\"=\"Both\"",
            "",
            ";wslg",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Terminal Server Client\\Default\\OptionalAddIns\\WSLDVC_PACKAGE]",
            "\"Name\"=\"$instdir\\\\WSLDVCPlugin.dll\"",
            "",
            "",
            "",
            ";explorerplan9shortcut",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}]",
            "@=\"Linux\"",
            "\"SortOrderIndex\"=dword:00000077",
            "\"System.IsPinnedToNameSpaceTree\"=dword:00000001",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\\DefaultIcon]",
            "@=\"C:\\\\Windows\\\\system32\\\\wsl.exe,-1\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\\InProcServer32]",
            "@=\"C:\\\\Windows\\\\system32\\\\windows.storage.dll\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\\Instance]",
            "\"CLSID\"=\"{4FE04BFD-85B9-49DD-B914-F4C9556B9DA6}\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\\Instance\\InitPropertyBag]",
            "\"DisplayType\"=dword:00000002",
            "\"EnumObjectsTelemetryValue\"=\"WSL\"",
            "\"Provider\"=\"Plan 9 Network Provider\"",
            "\"ResName\"=\"\\\\\\\\wsl.localhost\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\\ShellFolder]",
            "\"Attributes\"=dword:A080004D",
            "\"FolderValueFlags\"=dword:00000028",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Desktop\\NameSpace\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}]",
            "@=\"Linux\"",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\HideDesktopIcons\\NewStartPanel]",
            "\"{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\"=dword:00000001",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\IdListAliasTranslations]",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\IdListAliasTranslations\\WSL]",
            "\"Source\"=\"\\\\\\\\wsl.localhost\"",
            "\"Target\"=\"::{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\IdListAliasTranslations\\WSLLegacy]",
            "\"Source\"=\"\\\\\\\\wsl$\"",
            "\"Target\"=\"::{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\"",
            "",
            "",
            ";explorershell",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\background\\shell\\WSL]",
            "@=\"@wsl.exe,-2\"",
            "\"Extended\"=\"\"",
            "\"NoWorkingDirectory\"=\"\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\background\\shell\\WSL\\command]",
            "@=\"wsl.exe --cd \\\"%V\\\"\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\shell\\WSL]",
            "@=\"@wsl.exe,-2\"",
            "\"Extended\"=\"\"",
            "\"NoWorkingDirectory\"=\"\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\shell\\WSL\\command]",
            "@=\"wsl.exe --cd \\\"%V\\\"\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Drive\\shell\\WSL]",
            "@=\"@wsl.exe,-2\"",
            "\"Extended\"=\"\"",
            "\"NoWorkingDirectory\"=\"\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Drive\\shell\\WSL\\command]",
            "@=\"wsl.exe --cd \\\"%V\\\"\"",
            "",
            ";wslsettingsserver",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\wsl-settings]",
            "@=\"URL:wsl-settings\"",
            "\"URL Protocol\"=\"\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\App.ab34118555495193.Protocol\\Application]",
            "\"ApplicationName\"=\"WSL Settings\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\App.ab34118555495193.Protocol\\shell\\open\\command]",
            "@=\"\\\"$instdir\\\\wslsettings\\\\wslsettings.exe\\\" \\\"----ms-protocol:%1\\\"\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\WindowsAppRuntimeApplications\\App.ab34118555495193\\Capabilities\\UrlAssociations]",
            "\"wsl-settings\"=\"App.ab34118555495193.Protocol\"",
            "",
            "[HKEY_LOCAL_MACHINE\\SOFTWARE\\RegisteredApplications]",
            "\"App.ab34118555495193\"=\"Software\\\\Microsoft\\\\WindowsAppRuntimeApplications\\\\App.ab34118555495193\\\\Capabilities\"",
            "\"@ | Set-Content -Path \"$dir\\install-wsl.reg\" -Encoding Unicode",
            "",
            "reg.exe import \"$dir\\install-wsl.reg\"",
            "",
            "",
            "info 'Stopping the WSLService'",
            "sc.exe stop WSLService",
            "while ((Get-Service -Name \"WSLService\" -ErrorAction SilentlyContinue).Status -eq 'Running') {",
            "    info 'Waiting for WSLService to stop'",
            "    Start-Sleep -Seconds 1",
            "}",
            "info 'Removing the WSLService'",
            "sc.exe delete WSLService",
            "",
            "info 'Installing the WSLService'",
            "sc.exe create WSLService binPath= \"$dir\\WSLService.exe\" DisplayName= \"WSL Service\" start= auto obj= LocalSystem type= own",
            "",
            "info 'Installing the MSIX'",
            "Add-AppPackage \"$dir\\msixpackage\"",
            "",
            "warn 'You must restart your computer for the changes to take effect.'",
            "",
            "rundll32.exe \"$dir\\wslinstall.dll\", RegisterLspCategories"
        ]
    },
    "shortcuts": [
        [
            "wslsettings\\wslsettings.exe",
            "WSL Settings"
        ],
        [
            "wsl.exe",
            "WSL",
            "--cd ~"
        ]
    ],
    "pre_uninstall": [
        "if (!(is_admin)) {",
        "    error \"Administrator rights are required to uninstall $app.\"",
        "    exit 1",
        "}",
        "info 'Stopping the WSLService'",
        "sc.exe stop WSLService",
        "while ((Get-Service -Name \"WSLService\" -ErrorAction SilentlyContinue).Status -eq 'Running') {",
        "    info 'Waiting for WSLService to stop'",
        "    Start-Sleep -Seconds 1",
        "}",
        "info 'Removing the WSLService'",
        "sc.exe delete WSLService",
        "rundll32.exe \"$dir\\wslinstall.dll\", UnregisterLspCategories",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Lxss\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Interface\\{38541BDC-F54F-4CEB-85D0-37F0F3D2617E}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{4EA0C6DD-E9FF-48E7-994E-13A31D10DC60}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\AppID\\{370121D2-AA7E-4608-A86D-0BBAB9DA1A60}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{a9b7a1b9-0671-405c-95f1-e0612cb4ce7e}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{2B9C59C3-98F1-45C8-B87B-12AE3C7927E8}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\AppID\\{17696EAC-9568-4CF5-BB8C-82515AAD6C09}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{ABB755FC-1B86-4255-83E2-E5787ABCF6C2}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{7e6ad219-d1b3-42d5-b8ee-d96324e64ff6}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\AppID\\{7F82AD86-755B-4870-86B1-D2E68DFE8A49}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{60285AE6-AAF3-4456-B444-A6C2D0DEDA38}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{16479D2E-F0C3-4DBA-BF7A-04FFF0892B07}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Terminal Server Client\\Default\\OptionalAddIns\\WSLDVC_PACKAGE\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\CLSID\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Desktop\\NameSpace\\{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\HideDesktopIcons\\NewStartPanel\" /f /v \"{B2B4A4D1-2754-4140-A2EB-9A76D9D7CDC6}\"",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\IdListAliasTranslations\\WSL\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\IdListAliasTranslations\\WSLLegacy\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\background\\shell\\WSL\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\shell\\WSL\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Drive\\shell\\WSL\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\wsl-settings\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\App.ab34118555495193.Protocol\\Application\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\WindowsAppRuntimeApplications\\App.ab34118555495193\\Capabilities\\UrlAssociations\" /f",
        "reg.exe delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\RegisteredApplications\" /f /v \"App.ab34118555495193\"",
        "info 'Removing the MSIX'",
        "Get-AppxPackage -Name \"MicrosoftCorporationII.WindowsSubsystemForLinux\" | Remove-AppxPackage",
        "if ($cmd -eq 'uninstall') {",
        "    info 'Disable WSL1...'",
        "    Disable-WindowsOptionalFeature -FeatureName 'Microsoft-Windows-Subsystem-Linux' -Online -NoRestart | Out-Null",
        "}"
    ],
    "checkver": "github",
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/microsoft/WSL/releases/download/$version/wsl.$version.0.x64.msi#/wsl.msi_"
            },
            "arm64": {
                "url": "https://github.com/microsoft/WSL/releases/download/$version/wsl.$version.0.arm64.msi#/wsl.msi_"
            }
        }
    }
}
